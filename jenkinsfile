
pipeline {
	agent any
	// 定义仓库地址
	environment {
	    REPOSITORY=""
	}
	stages {
		stage('Build'){
			steps {
				echo 'Build ...'
				// sh 'mvn package docker:build'
				sh "mvn install -Dmaven.test.skip=true"
			}
		}
		stage('Test') {
			steps {
				echo 'Testing...'
			}
		}
		stage('Deploy') {
			steps {
				echo 'Deploying...'
				sh "pwd"
				println "${WORKSPACE}"
				println "${JENKINS_HOME}"
				sh "mv target/*.jar src/main/docker"
				dir('src/main/docker') {
                    sh "pwd"
                    sh "ls"
                    echo "${BUILD_NUMBER}"
                    // sh "docker build -t demo:v1.0 ."
                }
				// sh " docker run -p 9999:9999 -it -d --name=demo springboot/demo"
			}
		}
	
	}
}
